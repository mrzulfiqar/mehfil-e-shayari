{% extends 'admin/base.html' %}

{% block content %}
<div class="mb-8">
    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
        <h2 class="text-2xl sm:text-3xl font-heading text-amber-500">Dashboard</h2>
        <a href="{{ url_for('add_shayari') }}"
            class="btn-primary flex items-center gap-2 w-full sm:w-auto justify-center">
            <span class="text-xl">+</span> Compose Shayari
        </a>
    </div>
</div>

{% if shayari_list %}
<!-- Mobile-friendly card layout -->
<div class="space-y-4">
    {% for item in shayari_list %}
    <div
        class="bg-stone-800 rounded-xl-custom border border-stone-700 p-4 sm:p-6 hover:bg-stone-800/80 transition-colors">
        <!-- Title and Status Row -->
        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-start gap-3 mb-3">
            <div class="flex-1 min-w-0">
                <h3 class="font-bold text-amber-100 text-lg sm:text-xl font-heading truncate">{{ item.title }}</h3>
                <p class="text-stone-400 text-sm mt-1 line-clamp-2">{{ item.content }}</p>
            </div>
            <div class="flex-shrink-0">
                {% if item.is_published %}
                <span
                    class="inline-block px-3 py-1 text-xs font-semibold text-emerald-100 bg-emerald-900/60 rounded-full">
                    Published
                </span>
                {% else %}
                <span class="inline-block px-3 py-1 text-xs font-semibold text-stone-400 bg-stone-700/60 rounded-full">
                    Draft
                </span>
                {% endif %}
            </div>
        </div>

        <!-- Category and Mood -->
        <div class="flex flex-wrap gap-2 text-xs mb-4">
            <span class="px-2 py-1 bg-stone-900 rounded text-stone-300">{{ item.category }}</span>
            <span class="px-2 py-1 bg-stone-900 rounded text-stone-500 uppercase">{{ item.mood }}</span>
        </div>

        <!-- Actions -->
        <div class="flex flex-wrap gap-3 pt-3 border-t border-stone-700">
            <a href="{{ url_for('edit_shayari', id=item.id) }}"
                class="text-amber-500 hover:text-amber-400 font-semibold text-sm transition-colors">
                âœï¸ Edit
            </a>
            <form action="{{ url_for('delete_shayari', id=item.id) }}" method="POST" class="inline"
                onsubmit="return confirm('Are you sure you want to burn this poetry?');">
                <button type="submit" class="text-red-400 hover:text-red-300 text-sm transition-colors">
                    ğŸ—‘ï¸ Delete
                </button>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<!-- Empty State -->
<div class="bg-stone-800 rounded-xl-custom border border-stone-700 p-12 text-center">
    <p class="text-lg italic mb-4 text-stone-500">The scroll is empty.</p>
    <a href="{{ url_for('add_shayari') }}" class="text-amber-600 hover:text-amber-500 underline">
        Add your first masterpiece
    </a>
</div>
{% endif %}
{% endblock %}