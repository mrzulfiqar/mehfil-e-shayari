{% extends 'admin/base.html' %}

{% block content %}
<div class="flex justify-between items-center mb-8">
    <h2 class="text-3xl font-heading text-amber-500">Dashboard</h2>
    <a href="{{ url_for('add_shayari') }}" class="btn-primary flex items-center gap-2">
        <span class="text-xl">+</span> Compose Shayari
    </a>
</div>

<div class="bg-stone-800 shadow-xl rounded-xl-custom overflow-hidden border border-stone-700">
    <table class="min-w-full leading-normal">
        <thead>
            <tr>
                <th
                    class="px-5 py-4 border-b border-stone-700 bg-stone-900 text-left text-xs font-semibold text-stone-400 uppercase tracking-wider">
                    Title & Excerpt
                </th>
                <th
                    class="px-5 py-4 border-b border-stone-700 bg-stone-900 text-left text-xs font-semibold text-stone-400 uppercase tracking-wider">
                    Category/Mood
                </th>
                <th
                    class="px-5 py-4 border-b border-stone-700 bg-stone-900 text-center text-xs font-semibold text-stone-400 uppercase tracking-wider">
                    Status
                </th>
                <th
                    class="px-5 py-4 border-b border-stone-700 bg-stone-900 text-center text-xs font-semibold text-stone-400 uppercase tracking-wider">
                    Actions
                </th>
            </tr>
        </thead>
        <tbody class="divide-y divide-stone-700">
            {% for item in shayari_list %}
            <tr class="admin-table-row">
                <td class="px-5 py-5 text-sm">
                    <div class="font-bold text-amber-100 mb-1 text-lg font-heading">{{ item.title }}</div>
                    <div class="text-stone-400 truncate w-64 italic">{{ item.content }}</div>
                </td>
                <td class="px-5 py-5 text-sm">
                    <p class="text-stone-300 whitespace-no-wrap mb-1">{{ item.category }}</p>
                    <p class="text-stone-500 text-xs uppercase tracking-wide">{{ item.mood }}</p>
                </td>
                <td class="px-5 py-5 text-center text-sm">
                    {% if item.is_published %}
                    <span class="relative inline-block px-3 py-1 font-semibold text-emerald-100 leading-tight">
                        <span aria-hidden class="absolute inset-0 bg-emerald-900 opacity-60 rounded-full"></span>
                        <span class="relative">Published</span>
                    </span>
                    {% else %}
                    <span class="relative inline-block px-3 py-1 font-semibold text-stone-400 leading-tight">
                        <span aria-hidden class="absolute inset-0 bg-stone-700 opacity-60 rounded-full"></span>
                        <span class="relative">Draft</span>
                    </span>
                    {% endif %}
                </td>
                <td class="px-5 py-5 text-center text-sm space-x-3">
                    <a href="{{ url_for('edit_shayari', id=item.id) }}"
                        class="text-amber-500 hover:text-amber-400 font-semibold transition-colors">Edit</a>
                    <form action="{{ url_for('delete_shayari', id=item.id) }}" method="POST" class="inline"
                        onsubmit="return confirm('Are you sure you want to burn this poetry?');">
                        <button type="submit"
                            class="text-red-400 hover:text-red-300 ml-2 transition-colors">Delete</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" class="px-5 py-12 text-center text-stone-500">
                    <p class="text-lg italic mb-4">The scroll is empty.</p>
                    <a href="{{ url_for('add_shayari') }}" class="text-amber-600 hover:text-amber-500 underline">Add
                        your first masterpiece</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}